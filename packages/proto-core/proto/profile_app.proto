syntax = "proto3";

package lowcode.profile;
import "common/options.proto";

option (lowcode.meta.app_name) = "Profile App";
option (lowcode.meta.app_description) = "用户档案管理应用，包含基础信息、档案与经历。";

enum Role {
  ROLE_UNSPECIFIED = 0 [
    (lowcode.meta.ui_enum_label) = "请选择角色",
    (lowcode.meta.ui_enum_value) = ""
  ];
  ENGINEER = 1 [
    (lowcode.meta.ui_enum_label) = "工程师",
    (lowcode.meta.ui_enum_value) = "engineer"
  ];
  DESIGNER = 2 [
    (lowcode.meta.ui_enum_label) = "设计师",
    (lowcode.meta.ui_enum_value) = "designer"
  ];
  PM = 3 [
    (lowcode.meta.ui_enum_label) = "产品经理",
    (lowcode.meta.ui_enum_value) = "pm"
  ];
}

enum GenderType {
  GENDER_TYPE_UNSPECIFIED = 0 [
    (lowcode.meta.ui_enum_label) = "请选择性别",
    (lowcode.meta.ui_enum_value) = ""
  ];
  FEMALE = 1 [
    (lowcode.meta.ui_enum_label) = "女",
    (lowcode.meta.ui_enum_value) = "female"
  ];
  MALE = 2 [
    (lowcode.meta.ui_enum_label) = "男",
    (lowcode.meta.ui_enum_value) = "male"
  ];
}

message ProfileAddress {
  string city = 1;
  string zipcode = 2;
}

message ProfileObject {
  string email = 1;
  repeated ProfileAddress address = 2;
}

message ExperienceItem {
  string company = 1;
  int32 years = 2;
}

// Root message for admin runtime form generation.
message ProfileAppForm {
  string username = 9 [
    (lowcode.meta.ui_label) = "用户名",
    (lowcode.meta.ui_required) = true,
    (lowcode.meta.ui_pattern) = "^[a-zA-Z0-9_]{3,20}$",
    (lowcode.meta.ui_list) = true,
    (lowcode.meta.ui_unique) = true
  ];
  string full_name = 1 [
    (lowcode.meta.ui_label) = "全名",
    (lowcode.meta.ui_required) = true,
    (lowcode.meta.ui_list) = true
  ];
  string phone = 10 [
    (lowcode.meta.ui_label) = "手机号",
    (lowcode.meta.ui_pattern) = "^1\\d{10}$",
    (lowcode.meta.ui_list) = true
  ];
  int32 age = 2 [
    (lowcode.meta.ui_label) = "年龄",
    (lowcode.meta.ui_list) = true
  ];
  Role role = 3 [
    (lowcode.meta.ui_label) = "角色",
    (lowcode.meta.ui_list) = true
  ];
  GenderType gender = 4 [
    (lowcode.meta.ui_label) = "性别",
    (lowcode.meta.ui_list) = true
  ];
  bool agree_policy = 5;
  repeated string tags = 6;
  ProfileObject profile = 7 [
    (lowcode.meta.ui_label) = "档案",
    (lowcode.meta.ui_list) = true
  ];
  repeated ExperienceItem experiences = 8 [
    (lowcode.meta.ui_label) = "经历",
    (lowcode.meta.ui_list) = true
  ];
}
